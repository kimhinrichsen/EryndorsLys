/* =========================================================================
   Eryndors Lys – chronicle.css
   KOMPLET FIL (intet slettet – alt centreret + forbedret Krønike-udseende)
   -------------------------------------------------------------------------
   Mål:
   1. ALT hovedindhold er centreret i en fælles kolonne (forside + Krønike).
   2. Krøniken ligner en illustreret bog med separate, kort-lignende sider.
   3. Ingen ændringer i JavaScript nødvendige.
   4. Ekstra visuelle detaljer: ornamenter, side-faner, dekorative skygger,
      differentierede sektioner, let farvekodning, tydelig rille.
   5. Bevarer alle eksisterende klasse-navne (ingen funktioner brudt).
   -------------------------------------------------------------------------
   Juster kolonnebredder via variabler nederst (GLOBAL CENTERING OVERRIDES).
   ========================================================================= */

/* ---------- VARIABLER ---------- */
:root {
  --bg-dark: #12171c;
  --panel: #1a2025;
  --panel-border: #27313a;
  --accent-grad: linear-gradient(90deg,#4a7fb9,#79b5e9);
  --accent-strong: #4d8fcc;
  --radius: 10px;
  --maxw: 1200px;
  --text-light: #d9dee3;

  --book-cover: #2d2a24;
  --book-cover-edge: #3d352b;
  --book-paper-top: #fdfaf5;
  --book-paper-bottom: #f2ebdf;
  --book-gold: #c9a86b;

  --color-success: #45a361;
  --color-warn: #d1a23c;
  --color-danger: #c25757;

  --shadow-soft: 0 4px 10px rgba(0,0,0,.35);
  --shadow-strong: 0 10px 24px -4px rgba(0,0,0,.55);

  /* Basis kolonne (kan justeres i global override nederst) */
  --col-width: 760px;
  --page-width: 360px;
}

/* ---------- GLOBAL RESET ---------- */
html,body {
  margin:0;
  padding:0;
  background:var(--bg-dark);
  color:var(--text-light);
  font-family:system-ui, Arial, sans-serif;
  -webkit-font-smoothing:antialiased;
}

* {
  -webkit-tap-highlight-color:transparent;
  box-sizing:border-box;
}

.lock-scroll {
  overflow:hidden;
}

.view {
  min-height:100vh;
  width:100%;
  position:relative;
}

/* ---------- APP SHELL / MAIN VIEW ---------- */
.app-shell {
  max-width:var(--maxw);
  margin:0 auto;
  padding:1.4rem 1.5rem 5rem;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.center-block {
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
}

/* ---------- HEADER ---------- */
.top-header {
  width:100%;
  display:flex;
  justify-content:center;
  margin-bottom:1rem;
  position:relative;
}
.kro-header {
  margin:0;
  font-size:1.9rem;
  letter-spacing:.5px;
  font-weight:600;
  background:linear-gradient(90deg,#bcd8f2,#e6f2ff);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 1px 2px rgba(0,0,0,.5);
  position:relative;
}
.kro-header::after {
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:-8px;
  width:160px;
  height:2px;
  background:linear-gradient(90deg,transparent,#4d7aa7,#4d7aa7,transparent);
  opacity:.45;
}

/* ---------- XP BAR ---------- */
.kro-xp-bar-container {
  display:flex;
  align-items:center;
  gap:.6rem;
  background:#1d252c;
  border:1px solid #2c3741;
  padding:.6rem .8rem;
  border-radius:var(--radius);
  width:100%;
  max-width:var(--col-width);
  font-size:.75rem;
  box-shadow:var(--shadow-soft);
  position:relative;
  overflow:hidden;
}

.kro-xp-bar-container::before {
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 15% 30%, rgba(90,150,210,.18), transparent 70%);
  pointer-events:none;
}

.kro-xp-bar {
  flex:1;
  height:10px;
  background:#2f3a44;
  border-radius:6px;
  overflow:hidden;
  position:relative;
}
.kro-xp-bar::after {
  content:"";
  position:absolute;
  inset:0;
  background:
    repeating-linear-gradient(45deg,rgba(255,255,255,.06) 0 6px,rgba(255,255,255,0) 6px 12px);
  mix-blend-mode:overlay;
  opacity:.7;
  pointer-events:none;
}
.kro-xp-bar-fill {
  height:100%;
  background:var(--accent-grad);
  box-shadow:0 0 8px #69a4db;
  transition:width .55s cubic-bezier(.55,.15,.3,1);
}
.kro-xp-bar-label {
  opacity:.9;
  font-weight:600;
  letter-spacing:.4px;
}
.kro-xp-emblem { font-size:1rem; filter:drop-shadow(0 0 4px rgba(255,255,255,.15)); }

/* ---------- STORY BOX ---------- */
.kro-storybox {
  margin-top:1.4rem;
  background:linear-gradient(160deg,#1e262d,#181f24);
  border:1px solid #2e3943;
  padding:1rem 1.1rem 1.25rem;
  border-radius:var(--radius);
  width:100%;
  max-width:var(--col-width);
  position:relative;
  box-shadow:var(--shadow-soft);
  overflow:hidden;
}

.kro-storybox::before {
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 78% 18%,rgba(100,160,210,.15),transparent 60%);
  pointer-events:none;
}

.kro-storytitle {
  margin:0 0 .7rem;
  font-size:1.15rem;
  letter-spacing:.5px;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:.5rem;
  color:#e3edf5;
}
.kro-storytitle::before {
  content:"✦";
  color:#5ca0da;
  text-shadow:0 0 6px rgba(92,160,218,.6);
  font-size:.95rem;
}

.kro-storybody {
  font-size:.85rem;
  line-height:1.42rem;
  opacity:.94;
}

/* ---------- PROFILE / MENTORS ---------- */
.kro-profilbox {
  margin-top:1.3rem;
  background:#1d242b;
  border:1px solid #2d3842;
  padding:.9rem 1rem;
  border-radius:var(--radius);
  width:100%;
  max-width:var(--col-width);
  box-shadow:var(--shadow-soft);
  position:relative;
  overflow:hidden;
}
.kro-profilbox::after {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,rgba(255,255,255,.06),rgba(255,255,255,0));
  opacity:.6;
  mix-blend-mode:overlay;
  pointer-events:none;
}

.kro-mentors {
  width:100%;
  margin-top:.8rem;
}
.kro-mentors-row {
  display:flex;
  flex-wrap:wrap;
  gap:.65rem;
  justify-content:center;
}

.kro-mentorbox {
  background:linear-gradient(150deg,#202b34,#1a2229 60%);
  border:1px solid #2f3b45;
  border-radius:12px;
  padding:.55rem .65rem .7rem;
  display:flex;
  flex-direction:column;
  gap:.5rem;
  cursor:pointer;
  min-width:175px;
  font-size:.72rem;
  position:relative;
  overflow:hidden;
  color:#d6e4ed;
  box-shadow:0 3px 8px rgba(0,0,0,.35);
  transition:background .35s, transform .25s;
}
.kro-mentorbox::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(145deg,rgba(255,255,255,.09),rgba(255,255,255,0) 55%),
    radial-gradient(circle at 80% 15%,rgba(110,170,230,.25),transparent 70%);
  opacity:0;
  transition:opacity .5s;
  pointer-events:none;
}
.kro-mentorbox:hover {
  background:linear-gradient(150deg,#253442,#1f2a32 60%);
  transform:translateY(-3px);
}
.kro-mentorbox:hover::before { opacity:1; }

.kro-mentor-main {
  font-weight:600;
  display:flex;
  gap:.45rem;
  align-items:center;
  font-size:.8rem;
}
.kro-mentor-main b { font-weight:600; }

.kro-mentor-progressbar {
  display:flex;
  flex-direction:column;
  gap:.35rem;
}
.kro-mentor-emblem { font-size:1rem; }
.kro-mentor-bar {
  height:8px;
  background:#2b353e;
  border-radius:5px;
  overflow:hidden;
  position:relative;
}
.kro-mentor-bar::before {
  content:"";
  position:absolute;
  inset:0;
  background:repeating-linear-gradient(45deg,rgba(255,255,255,.08) 0 8px,rgba(255,255,255,0) 8px 16px);
  mix-blend-mode:overlay;
  opacity:.6;
}
.kro-mentor-bar-fill {
  height:100%;
  background:linear-gradient(90deg,#4c82b3,#6faedc);
  transition:width .6s cubic-bezier(.55,.15,.3,1);
  box-shadow:0 0 6px #5d9ccd;
}
.kro-mentor-bar-label {
  font-size:.63rem;
  opacity:.85;
  letter-spacing:.4px;
  font-weight:600;
}

/* ---------- QUESTS (TAVLE + AKTIVE) ---------- */
.kro-questheader {
  margin:2rem 0 .9rem;
  font-size:1.12rem;
  letter-spacing:.5px;
  width:100%;
  max-width:var(--col-width);
  font-weight:600;
  display:flex;
  gap:.6rem;
  align-items:center;
  color:#e2ecf5;
  position:relative;
}
.kro-questheader::before {
  content:"⚔";
  filter:drop-shadow(0 0 4px rgba(255,255,255,.2));
}
.kro-questheader::after {
  content:"";
  flex:1;
  height:2px;
  background:linear-gradient(90deg,rgba(90,140,190,.7),transparent);
  border-radius:1px;
  margin-left:.6rem;
  opacity:.4;
}

.kro-quests {
  display:flex;
  flex-direction:column;
  gap:.75rem;
  width:100%;
  max-width:var(--col-width);
  position:relative;
}

.kro-questroll {
  background:linear-gradient(160deg,#1d2730,#192025);
  border:1px solid #2b3944;
  padding:.8rem .9rem .95rem;
  border-radius:14px;
  font-size:.72rem;
  line-height:1.15rem;
  box-shadow:0 4px 12px rgba(0,0,0,.35);
  position:relative;
  overflow:hidden;
  transition:background .35s, transform .25s, border-color .35s;
}
.kro-questroll::before,
.kro-questroll::after {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 85% 18%,rgba(90,150,210,.28),transparent 68%),
    linear-gradient(130deg,rgba(255,255,255,.08),rgba(255,255,255,0) 55%);
  opacity:.0;
  pointer-events:none;
  transition:opacity .5s;
}
.kro-questroll:hover {
  background:linear-gradient(155deg,#23313b,#1c262c);
  transform:translateY(-3px);
  border-color:#374d5a;
}
.kro-questroll:hover::before { opacity:.9; }
.kro-questroll:hover::after { opacity:.3; }

.kro-questroll b {
  font-size:.78rem;
  letter-spacing:.3px;
  display:inline-block;
  margin-left:.2rem;
  font-weight:600;
  color:#eaf2f8;
  text-shadow:0 1px 2px rgba(0,0,0,.4);
}

.kro-questicon {
  font-size:1.25rem;
  margin-right:.35rem;
  filter:drop-shadow(0 0 3px rgba(255,255,255,.18));
  vertical-align:middle;
}

.kro-questdesc {
  opacity:.9;
  margin:.4rem 0 .6rem;
  font-size:.7rem;
  line-height:1.15rem;
  color:#d2dee7;
}

.kro-questpts {
  font-weight:600;
  font-size:.66rem;
  letter-spacing:.3px;
  margin-bottom:.55rem;
  opacity:.92;
  color:#bcd5eb;
}

.kro-quest-progress {
  display:flex;
  gap:.55rem;
  flex-wrap:wrap;
  align-items:center;
  margin-bottom:.55rem;
  font-size:.64rem;
  font-weight:600;
  letter-spacing:.4px;
}

.kro-quest-actions {
  display:flex;
  gap:.6rem;
  flex-wrap:wrap;
}

/* ---------- GENERISKE KNAPPER ---------- */
.btn, .kro-btn {
  background:#2d4f7c;
  color:#f1f7fb;
  border:1px solid #386190;
  padding:.48rem .9rem .52rem;
  font-size:.72rem;
  cursor:pointer;
  border-radius:8px;
  letter-spacing:.35px;
  font-family:inherit;
  font-weight:600;
  transition:background .3s, transform .2s, box-shadow .35s;
  position:relative;
  overflow:hidden;
}
.btn::before, .kro-btn::before {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(140deg,rgba(255,255,255,.18),rgba(255,255,255,0) 55%);
  opacity:.0;
  transition:opacity .5s;
  pointer-events:none;
}
.btn:hover, .kro-btn:hover {
  background:#366290;
  box-shadow:0 4px 14px -2px rgba(0,0,0,.5);
}
.btn:hover::before, .kro-btn:hover::before {
  opacity:.5;
}
.btn:active, .kro-btn:active {
  transform:translateY(2px);
}
.btn.ghost {
  background:#30363d;
  border:1px solid #444c55;
  color:#d3dde4;
}
.btn.ghost:hover { background:#3a424a; }
.btn.back-btn {
  background:#2f3c47;
  border:1px solid #44525e;
  color:#dbe4ea;
}
.btn.back-btn:hover { background:#3b4a56; }
.btn.mini {
  padding:.3rem .55rem .35rem;
  font-size:.63rem;
  border-radius:6px;
}
.btn.primary {
  background:#346296;
  border:1px solid #4476ae;
  color:#eef6fb;
}
.btn.primary:hover { background:#4075b5; }
.kro-btn.kro-drop {
  background:#4a2d2d;
  border-color:#613b3b;
}
.kro-btn.kro-drop:hover { background:#5b3636; }

/* ---------- FLYDENDE LAUNCHER ---------- */
#chronicle-launcher {
  position:fixed;
  bottom:14px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  width:82px;
  height:82px;
  background:radial-gradient(circle at 35% 30%, #324355, #1d2730);
  color:#f2f6fa;
  border:1px solid #3c4d5c;
  border-radius:50%;
  box-shadow:0 10px 28px -6px rgba(0,0,0,.6),0 0 0 6px rgba(65,120,170,.22);
  cursor:pointer;
  font-size:.7rem;
  text-align:center;
  font-weight:600;
  letter-spacing:.4px;
  user-select:none;
  transition:transform .45s, box-shadow .5s;
  z-index:4100;
}
#chronicle-launcher .icon {
  font-size:1.8rem;
  filter:drop-shadow(0 2px 5px rgba(0,0,0,.55));
}
#chronicle-launcher:hover {
  transform:translateX(-50%) scale(1.07);
  box-shadow:0 12px 34px -4px rgba(0,0,0,.65),0 0 0 9px rgba(65,120,170,.32);
}
.pulse { animation:pulseGlow 3.2s ease-in-out infinite; }
@keyframes pulseGlow {
  0%,100% { box-shadow:0 10px 28px -6px rgba(0,0,0,.6),0 0 0 6px rgba(65,120,170,.22); }
  50% { box-shadow:0 10px 28px -6px rgba(0,0,0,.6),0 0 0 12px rgba(65,120,170,.38); }
}

/* ---------- MENTOR OVERLAY ---------- */
#mentor-overlay {
  position:fixed;
  inset:0;
  display:none;
  align-items:flex-start;
  justify-content:center;
  padding:7vh 2.2rem 3rem;
  background:rgba(10,14,18,.78);
  backdrop-filter:blur(6px);
  z-index:4000;
}

.kro-mentor-overlaybox {
  background:#1d2127;
  color:#e5e7ea;
  width:clamp(340px,70%,960px);
  max-height:86vh;
  overflow:auto;
  border:1px solid #2f363e;
  border-radius:20px;
  padding:30px 34px 40px;
  font-size:.84rem;
  line-height:1.35rem;
  position:relative;
  box-shadow:0 18px 46px -10px rgba(0,0,0,.65);
  backdrop-filter:blur(2px);
}
.kro-mentor-overlaybox h3 {
  margin:1.2rem 0 .65rem;
  font-size:.78rem;
  letter-spacing:.4px;
  color:#d9e6ef;
  text-transform:uppercase;
  font-weight:700;
  opacity:.9;
}
.kro-mentor-overlaybox hr {
  border:none;
  height:1px;
  background:linear-gradient(90deg,rgba(255,255,255,.12),transparent);
  margin:1.6rem 0 1.2rem;
}

/* ---------- OVERLAY CLOSE BUTTON ---------- */
.kro-close {
  position:absolute;
  top:12px;
  right:14px;
  padding:.42rem .72rem;
  font-size:.68rem;
  background:#313a43;
  border:1px solid #45525e;
  color:#cfd6de;
  cursor:pointer;
  border-radius:8px;
  font-weight:600;
  letter-spacing:.4px;
  transition:background .35s, transform .2s;
}
.kro-close:hover { background:#3a444d; }
.kro-close:active { transform:translateY(2px); }

/* ---------- LORE POPUP ---------- */
.lore-popup {
  background:#1f252c;
  color:#f1f5f7;
  max-width:560px;
  width:clamp(300px,70%,560px);
  border:1px solid #32404d;
  border-radius:22px;
  padding:30px 34px 36px;
  font:14px/1.5 system-ui,Arial,sans-serif;
  position:relative;
  box-shadow:0 14px 44px -8px rgba(0,0,0,.6);
  animation:fadeIn .3s;
  overflow:hidden;
}
.lore-popup::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 80% 12%,rgba(110,170,230,.28),transparent 65%),
    linear-gradient(130deg,rgba(255,255,255,.07),rgba(255,255,255,0));
  opacity:.7;
  mix-blend-mode:overlay;
  pointer-events:none;
}
.lore-popup h2 { margin:0 0 14px; font-size:22px; font-weight:600; letter-spacing:.6px; }
.lp-major { margin:0 0 18px; font-weight:600; font-size:.95rem; }
.lp-minor { margin:0 0 20px 20px; padding:0; }
.lp-minor li { margin:.25rem 0; }
.lp-close {
  position:absolute;
  top:14px;
  right:16px;
  background:#2c3640;
  color:#c9d2d9;
  border:1px solid #44525e;
  border-radius:8px;
  cursor:pointer;
  padding:4px 10px;
  font-size:12px;
  font-weight:600;
  letter-spacing:.4px;
}
.lp-close:hover { background:#33414c; }
.lp-actions { text-align:right; }

/* ---------- KRØNIKE VIEW BAGGRUND ---------- */
#chronicle-view {
  background:
    radial-gradient(circle at 60% 18%, #202a33, #14191e 68%),
    linear-gradient(140deg,#182026,#14191e);
  color:#e5eaef;
  position:relative;
}

/* Subtile svævende partikler (kun pynt) */
#chronicle-view::before {
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 12% 20%,rgba(120,170,220,.12),transparent 60%),
    radial-gradient(circle at 82% 30%,rgba(130,160,210,.08),transparent 70%);
  mix-blend-mode:overlay;
  pointer-events:none;
  opacity:.5;
  animation:skyShift 18s linear infinite alternate;
}
@keyframes skyShift {
  0% { transform:translateY(0); }
  100% { transform:translateY(10px); }
}

/* ---------- KRØNIKE SHELL ---------- */
.chron-shell {
  max-width:var(--maxw);
  margin:0 auto;
  padding:1.6rem 1.6rem 4rem;
  display:flex;
  flex-direction:column;
  gap:1.4rem;
  box-sizing:border-box;
  align-items:center;
}

.chron-topbar {
  width:100%;
  max-width:var(--col-width);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:1rem;
  background:#1e262d;
  border:1px solid #2d3944;
  padding:.7rem 1rem;
  border-radius:14px;
  box-shadow:0 6px 18px -6px rgba(0,0,0,.55);
  position:relative;
  overflow:hidden;
}
.chron-topbar::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(115deg,rgba(255,255,255,.07),rgba(255,255,255,0) 55%),
    radial-gradient(circle at 82% 25%,rgba(120,170,230,.2),transparent 70%);
  opacity:.7;
  mix-blend-mode:overlay;
  pointer-events:none;
}
.chron-title {
  margin:0;
  font-size:1.35rem;
  letter-spacing:.6px;
  font-weight:600;
  background:linear-gradient(90deg,#c4d9ec,#ffffff);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 1px 3px rgba(0,0,0,.7);
}
.chron-actions { display:flex; gap:.6rem; }

/* ---------- BOG WRAPPER ---------- */
.book-wrapper, .book-outer {
  width:100%;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:1rem 0 2.4rem;
  position:relative;
}

.book {
  display:inline-flex;
  align-items:stretch;
  max-width:calc(var(--page-width)*2 + 250px);
  width:auto;
  min-height:560px;
  filter:drop-shadow(0 12px 22px rgba(0,0,0,.55));
  position:relative;
  animation:bookEnter .6s cubic-bezier(.6,.1,.3,1);
}
@keyframes bookEnter {
  0% { opacity:0; transform:translateY(14px) scale(.97); }
  100% { opacity:1; transform:translateY(0) scale(1); }
}

/* COVER */
.book-cover {
  width:190px;
  background:
    linear-gradient(145deg,#342c24,#221d18 65%),
    repeating-linear-gradient(45deg,rgba(255,255,255,.06) 0 10px,rgba(255,255,255,0) 10px 20px);
  border:2px solid var(--book-cover-edge);
  border-right:none;
  border-radius:18px 0 0 18px;
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  box-shadow:
    inset 0 0 22px -2px rgba(0,0,0,.7),
    0 0 0 1px rgba(255,255,255,.08),
    0 8px 16px -8px rgba(0,0,0,.6);
  overflow:hidden;
}
.book-cover::after {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 72% 24%,rgba(255,255,255,.18),transparent 70%),
    linear-gradient(130deg,rgba(255,255,255,.14),rgba(255,255,255,0) 55%);
  mix-blend-mode:overlay;
  opacity:.6;
  pointer-events:none;
}
.book-cover-inner {
  text-align:center;
  color:#e3d4b6;
  font-weight:600;
  letter-spacing:.5px;
  position:relative;
  z-index:2;
  font-size:.9rem;
}
.book-logo {
  font-size:2.6rem;
  margin-bottom:.65rem;
  text-shadow:0 2px 4px rgba(0,0,0,.6),0 0 10px rgba(255,255,255,.15);
  display:block;
}
.book-brand {
  font-size:.75rem;
  letter-spacing:2px;
  text-transform:uppercase;
  opacity:.85;
  background:linear-gradient(90deg,#f2e6d2,#fff0d8);
  -webkit-background-clip:text;
  color:transparent;
  text-shadow:0 1px 2px rgba(0,0,0,.6);
}

/* RYG */
.book-spine {
  width:20px;
  background:
    repeating-linear-gradient(180deg,#3b3228 0 8px,#31281f 8px 16px),
    linear-gradient(90deg,rgba(255,255,255,.15),rgba(255,255,255,0));
  border-top:2px solid var(--book-cover-edge);
  border-bottom:2px solid var(--book-cover-edge);
  border-left:2px solid var(--book-cover-edge);
  box-shadow:inset 0 0 12px rgba(0,0,0,.65);
  position:relative;
}
.book-spine::after {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(90deg,rgba(255,255,255,.25),rgba(255,255,255,0));
  mix-blend-mode:overlay;
  opacity:.4;
}

/* PAGES BLOK */
.book-pages {
  flex:0 0 auto;
  background:linear-gradient(180deg,var(--book-paper-top) 0%, var(--book-paper-bottom) 100%);
  position:relative;
  padding:2.2rem 2.4rem 3rem;
  border:2px solid #d9ccb9;
  border-left:none;
  border-radius:0 18px 18px 0;
  color:#2c241b;
  overflow:visible;
  display:flex;
  flex-direction:column;
  min-width:calc(var(--page-width)*2 + 4.2rem);
  transition:box-shadow .5s;
}
.book-pages:hover {
  box-shadow:0 0 0 1px rgba(255,255,255,.3), 0 6px 28px -6px rgba(0,0,0,.5);
}
.book-pages::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    linear-gradient(90deg,rgba(0,0,0,.18),rgba(0,0,0,0) 16%,rgba(0,0,0,0)),
    repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 2px, rgba(0,0,0,0) 2px 4px);
  mix-blend-mode:multiply;
  pointer-events:none;
  opacity:.55;
}

/* PAGINATION */
.book-pagination {
  position:absolute;
  top:10px;
  right:14px;
  display:flex;
  gap:.6rem;
  align-items:center;
  background:rgba(255,255,255,.65);
  backdrop-filter:blur(6px);
  padding:.45rem .75rem;
  border:1px solid #d4c6b3;
  border-radius:12px;
  font-size:.68rem;
  box-shadow:0 6px 15px -5px rgba(0,0,0,.3);
  z-index:10;
  font-weight:600;
}
.book-pagination .btn.mini {
  background:#eee2d3;
  border:1px solid #ccbba2;
  color:#4a3827;
  font-weight:600;
  box-shadow:0 2px 4px rgba(0,0,0,.12);
}
.book-pagination .btn.mini:hover:not(:disabled){
  background:#f6eee5;
}
.book-pagination .btn.mini:disabled {
  opacity:.4;
  cursor:default;
  box-shadow:none;
}
.page-indicator {
  font-weight:700;
  letter-spacing:.4px;
  color:#3f2e1f;
}

/* SPREAD (to sider) */
.book-spread {
  display:grid;
  grid-template-columns:repeat(2, var(--page-width));
  gap:1.8rem;
  justify-content:center;
  align-content:start;
  margin-top:2.4rem;
  position:relative;
  perspective:2000px;
  min-height:420px;
}
.book-spread::before {
  content:"";
  position:absolute;
  left:50%;
  top:0;
  bottom:0;
  width:1px;
  background:linear-gradient(to bottom,rgba(0,0,0,.35),rgba(0,0,0,0.05),rgba(0,0,0,.35));
  pointer-events:none;
  opacity:.5;
}

/* SIDE (enkelt page) */
.book-page {
  background:#ffffff;
  background:
    linear-gradient(180deg,#ffffff 0%,#f9f3eb 100%);
  border:1px solid #d2c2ad;
  border-radius:14px;
  padding:1.15rem 1.15rem 1.35rem;
  box-shadow:
    0 4px 10px rgba(0,0,0,.08),
    0 1px 0 1px #efe5d7 inset;
  font-size:.74rem;
  line-height:1.18rem;
  display:flex;
  flex-direction:column;
  position:relative;
  overflow:hidden;
  width:var(--page-width);
  animation:pageFade .45s ease;
}
@keyframes pageFade {
  from { opacity:0; transform:translateY(10px); }
  to   { opacity:1; transform:translateY(0); }
}
.book-page h3 {
  margin:0 0 .75rem;
  font-size:1.05rem;
  font-weight:700;
  letter-spacing:.55px;
  color:#3d2d20;
  text-shadow:0 1px 1px #fff;
  position:relative;
  display:flex;
  align-items:center;
  gap:.45rem;
}
.book-page h3::before {
  content:"✧";
  font-size:.95rem;
  color:#c59a4c;
  text-shadow:0 0 4px rgba(197,154,76,.6);
}
.book-page::after {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 85% 15%, rgba(255,255,255,.65), transparent 60%),
    linear-gradient(130deg, rgba(255,255,255,.38), rgba(255,255,255,0) 70%);
  mix-blend-mode:screen;
  pointer-events:none;
  opacity:.55;
}

/* DEKORATIVE PAGE-FANER (øverst) */
.book-page::before {
  content:"";
  position:absolute;
  top:0;
  left:0;
  height:6px;
  width:100%;
  background:
    linear-gradient(90deg,#d0b894,#f3e3c5,#d0b894);
  opacity:.9;
  box-shadow:0 2px 4px -1px rgba(0,0,0,.25),0 0 0 1px rgba(255,255,255,.55) inset;
  border-radius:12px 12px 0 0;
}

/* SIDETYPE-SPECIFIK FAVESTREGEN (kan varieres) */
.book-page--stats::before { background:linear-gradient(90deg,#88b4da,#d3e6f4,#88b4da); }
.book-page--achievements::before { background:linear-gradient(90deg,#aecf9f,#e5f6dd,#aecf9f); }
.book-page--completed::before { background:linear-gradient(90deg,#d6b27c,#f3e3c5,#d6b27c); }
.book-page--lore::before { background:linear-gradient(90deg,#b49cd8,#e7dcf4,#b49cd8); }

/* Stats grid */
.stats-summary {
  display:flex;
  gap:1.2rem;
  flex-wrap:wrap;
  font-size:.78rem;
  margin-bottom:.7rem;
  font-weight:600;
  letter-spacing:.25px;
}
.stats-summary div {
  background:#f5ede2;
  padding:.4rem .65rem;
  border-radius:8px;
  border:1px solid #e3d4c0;
  box-shadow:0 2px 4px rgba(0,0,0,.06);
}

.stats-grid {
  display:flex;
  flex-wrap:wrap;
  gap:.7rem;
}
.stat-card {
  background:#f9f3ea;
  border:1px solid #d3c3ad;
  border-radius:10px;
  padding:.55rem .65rem .6rem;
  min-width:118px;
  font-size:.66rem;
  line-height:1.1rem;
  box-shadow:0 2px 4px rgba(0,0,0,.07);
  position:relative;
  overflow:hidden;
}
.stat-card::after {
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,rgba(255,255,255,.4),rgba(255,255,255,0) 55%);
  opacity:.55;
  mix-blend-mode:overlay;
  pointer-events:none;
}
.stat-title {
  font-weight:700;
  margin-bottom:.25rem;
  font-size:.7rem;
  color:#3b2a1d;
}
.stat-line span {
  opacity:.7;
}

/* Achievements */
.ach-block h4 {
  margin:.3rem 0 .55rem;
  font-size:.78rem;
  color:#402f21;
  letter-spacing:.4px;
  font-weight:700;
  text-transform:uppercase;
  opacity:.85;
}
.ach-grid {
  display:flex;
  flex-wrap:wrap;
  gap:.6rem;
}
.ach-item {
  background:#f9f3ea;
  border:1px solid #d0c0ac;
  border-radius:10px;
  padding:.55rem .65rem .65rem;
  width:156px;
  font-size:.62rem;
  display:flex;
  flex-direction:column;
  gap:.35rem;
  position:relative;
  overflow:hidden;
  box-shadow:0 2px 4px rgba(0,0,0,.06);
  transition:transform .25s, box-shadow .35s;
}
.ach-item::before {
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 80% 18%,rgba(255,255,255,.65),transparent 70%);
  mix-blend-mode:screen;
  opacity:.55;
  pointer-events:none;
  transition:opacity .4s;
}
.ach-item:hover {
  transform:translateY(-3px);
  box-shadow:0 4px 10px rgba(0,0,0,.12);
}
.ach-item:hover::before {
  opacity:.85;
}
.ach-item.unlocked {
  background:#ecf6ed;
  border-color:#9fc5a4;
}
.ach-item.unlocked::before {
  background:radial-gradient(circle at 80% 18%,rgba(255,255,255,.8),transparent 70%);
}
.ach-item-title {
  font-weight:700;
  letter-spacing:.3px;
  color:#3d2d20;
}
.ach-item-desc {
  opacity:.85;
  font-weight:500;
}
.ach-item-status {
  position:absolute;
  top:6px;
  right:8px;
  font-weight:700;
  font-size:.63rem;
  color:#30753a;
  text-shadow:0 1px 1px #fff;
}
.ach-item:not(.unlocked) .ach-item-status {
  color:#8c8c8c;
  text-shadow:none;
}

/* Completed quests */
.qtable-wrap {
  max-height:300px;
  overflow:auto;
  border:1px solid #e1d5c4;
  border-radius:8px;
  background:#fff;
  position:relative;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}
.qtable-wrap::-webkit-scrollbar {
  width:10px;
}
.qtable-wrap::-webkit-scrollbar-track {
  background:#f3e8da;
  border-radius:0 8px 8px 0;
}
.qtable-wrap::-webkit-scrollbar-thumb {
  background:#d3c1ab;
  border-radius:8px;
  border:2px solid #f3e8da;
}
.qtable {
  width:100%;
  border-collapse:collapse;
  font-size:.6rem;
}
.qtable th {
  text-align:left;
  background:#efe4d3;
  padding:5px 7px;
  position:sticky;
  top:0;
  font-weight:700;
  font-size:.6rem;
  letter-spacing:.4px;
  z-index:2;
  color:#3d2d20;
  border-bottom:1px solid #e2d2bf;
}
.qtable td {
  padding:4px 7px;
  border-top:1px solid #eadccb;
  font-weight:500;
}
.qtable td.num {
  text-align:right;
  font-variant-numeric:tabular-nums;
}
.qtable tbody tr:nth-child(2n){
  background:#fbf7f1;
}
.qtable tbody tr:hover {
  background:#f3ebdf;
}

/* Lore page */
.lore-list {
  display:flex;
  flex-direction:column;
  gap:.65rem;
  max-height:300px;
  overflow:auto;
}
.lore-list::-webkit-scrollbar {
  width:8px;
}
.lore-list::-webkit-scrollbar-track {
  background:#efe4d4;
  border-radius:6px;
}
.lore-list::-webkit-scrollbar-thumb {
  background:#cfbda7;
  border-radius:6px;
  border:2px solid #efe4d4;
}

.lore-item {
  background:#fbf7f1;
  border:1px solid #e0d3c2;
  border-radius:10px;
  padding:.6rem .7rem .7rem;
  font-size:.64rem;
  line-height:1.08rem;
  position:relative;
  overflow:hidden;
  box-shadow:0 2px 4px rgba(0,0,0,.06);
  transition:transform .25s, box-shadow .35s;
}
.lore-item::before {
  content:"";
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 75% 20%,rgba(255,255,255,.85),transparent 68%),
    linear-gradient(120deg,rgba(255,255,255,.35),rgba(255,255,255,0) 60%);
  opacity:.45;
  mix-blend-mode:screen;
  pointer-events:none;
  transition:opacity .4s;
}
.lore-item:hover {
  transform:translateY(-3px);
  box-shadow:0 4px 12px rgba(0,0,0,.12);
}
.lore-item:hover::before {
  opacity:.8;
}
.lore-head {
  display:flex;
  justify-content:space-between;
  font-weight:700;
  margin-bottom:.42rem;
  font-size:.66rem;
  letter-spacing:.35px;
  color:#3b2a1d;
}
.lore-time {
  opacity:.6;
  font-weight:500;
}
.lore-major {
  font-weight:600;
  margin-bottom:.45rem;
  font-size:.7rem;
  color:#352519;
  line-height:1.12rem;
}
.lore-minor {
  margin:0 0 0 1.1rem;
  padding:0;
  list-style:disc;
}
.lore-minor li {
  margin:0 0 .25rem;
  line-height:1.05rem;
}

/* ---------- ACHIEVEMENT TOAST ---------- */
.ach-toast {
  backdrop-filter:blur(6px);
  border-radius:14px;
}
.ach-toast strong { color:#9fe6a6; }

/* ---------- FOKUS ---------- */
:focus-visible {
  outline:2px solid #5f9ed6;
  outline-offset:2px;
  border-radius:6px;
}

/* ---------- ANIM ---------- */
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

/* ---------- RESPONSIV (SMÅ SKÆRME) ---------- */
@media (max-width:980px){
  .book-pages {
    min-width:calc(var(--page-width)*2 + 3.2rem);
  }
}
@media (max-width:900px){
  .book {
    flex-direction:column;
    max-width:calc(var(--page-width) + 70px);
  }
  .book-spine {
    display:none;
  }
  .book-cover {
    width:100%;
    border-right:2px solid var(--book-cover-edge);
    border-bottom:none;
    border-radius:18px 18px 0 0;
  }
  .book-pages {
    border-left:2px solid #d9ccb9;
    border-top:none;
    border-radius:0 0 18px 18px;
    min-width:auto;
  }
  .book-spread {
    grid-template-columns:repeat(1, var(--page-width));
    gap:1.4rem;
  }
  .book-spread::before { display:none; }
}

@media (max-width:820px){
  .kro-profilbox,
  .kro-xp-bar-container,
  .kro-storybox,
  .kro-quests {
    max-width:100%;
  }
  #chronicle-launcher { width:74px; height:74px; }
}

@media (max-width:500px){
  :root { --page-width: 320px; }
  .book-pages { padding:1.8rem 1.2rem 2.2rem; }
  .book-spread { gap:1.3rem; }
  .chron-topbar { flex-wrap:wrap; }
}

/* =========================================================================
   GLOBAL CENTERING OVERRIDES (sikrer ALT er centreret – enkelt kilde)
   ========================================================================= */
#main-view,
#chronicle-view {
  display:flex;
  flex-direction:column;
  align-items:center;
}

#progressbar,
#story,
#profile,
#quests,
#activequests,
.kro-xp-bar-container,
.kro-storybox,
.kro-profilbox,
.kro-quests,
.kro-questheader,
#quests .kro-quests,
#activequests .kro-quests {
  max-width:var(--col-width);
  width:100%;
  margin-left:auto;
  margin-right:auto;
}

.kro-quests > .kro-questroll {
  width:100%;
}

.kro-mentor-overlaybox {
  margin-left:auto;
  margin-right:auto;
}

.kro-mentors-row {
  justify-content:center;
}

.book-wrapper,
.book-outer {
  display:flex;
  justify-content:center;
  width:100%;
}

.book {
  width:auto;
}

.book-pages {
  flex:0 0 auto;
}

.book-spread {
  justify-content:center;
  margin-left:auto;
  margin-right:auto;
}

.book-page {
  width:var(--page-width);
  margin-left:auto;
  margin-right:auto;
}

/* Fallback – hvis en komponent har egen max-width, centrér den */
[class*="kro-"] {
  margin-left:auto;
  margin-right:auto;
}

/* =========================================================================
   SLUT – Copy/paste hele filen for fuld effekt
   ========================================================================= */
